<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script type="text/javascript">
	var count = 10;

	$.ajax('../data/tflCredentials.json')
	.done(function(data) {
		tflCredentials = JSON.parse(data);
		var app_id = tflCredentials['app_id'];
		var app_key = tflCredentials['app_key'];

		$.ajax('https://api.tfl.gov.uk/Mode/bus/Arrivals?count=' + count + '&app_id=' + app_id + '&app_key=' + app_key)
		.done(function (data) {
			var vehicleIds = data.map(function (e) {
				return e['vehicleId'];
			}); // with duplicates
			vehicleIds = Array.from(new Set(vehicleIds)); // without duplicates
			vehicleIds.sort();
			document.open();
			document.write(vehicleIds.length + "\n");
			document.write(JSON.stringify(vehicleIds) + "\n");
			document.write(new TextEncoder('utf-8').encode(JSON.stringify(data)).length + " bytes");
		});
	});
</script>